<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>男友私房菜点餐系统</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Microsoft YaHei', sans-serif; 
      background: linear-gradient(135deg, #fff9f9, #f8f8ff);
      padding: 20px;
      padding-right: 80px;
      min-height: 100vh;
    }
    h1 { 
      text-align: center; 
      margin: 20px 0;
      color: #ff6b6b;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      position: relative;
      padding-bottom: 15px;
    }
    h1:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, #ff9a9e, #fad0c4);
      border-radius: 3px;
    }
    .category-title {
      margin: 30px 0 15px;
      color: #555;
      border-bottom: 2px solid #ffd6d6;
      padding-bottom: 8px;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
    }
    .category-title i {
      margin-right: 10px;
      color: #ff6b6b;
    }
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
    }
    .dish-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      position: relative;
    }
    .dish-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 20px rgba(255,107,107,0.2);
    }
    .dish-img-container {
      width: 100%;
      height: 200px;
      overflow: hidden;
      position: relative;
      background: #f9f9f9;
    }
    .dish-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }
    .dish-card:hover .dish-img {
      transform: scale(1.05);
    }
    .dish-info {
      padding: 15px;
    }
    .dish-name {
      font-weight: bold;
      font-size: 1.1rem;
      color: #333;
      margin-bottom: 5px;
    }
    .dish-price {
      color: #ff6b6b;
      font-size: 1.2rem;
      font-weight: bold;
      margin: 8px 0;
    }
    .add-btn {
      width: 100%;
      padding: 10px;
      background: linear-gradient(90deg, #ff9a9e, #fad0c4);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
      font-size: 1rem;
      letter-spacing: 1px;
    }
    .add-btn:hover {
      background: linear-gradient(90deg, #ff7b81, #f8c0b0);
      transform: translateY(-2px);
    }
    .cart {
      position: fixed;
      top: 25px;
      right: 25px;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      box-shadow: 0 5px 15px rgba(255,107,107,0.4);
      cursor: pointer;
      z-index: 100;
      transition: all 0.3s;
    }
    .cart:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(255,107,107,0.6);
    }
    .cart i {
      font-size: 28px;
      color: white;
    }
    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4757;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: bold;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      width: 90%;
      max-width: 500px;
      padding: 25px;
      border-radius: 15px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      cursor: pointer;
      font-size: 28px;
      color: #888;
      transition: color 0.3s;
    }
    .close-btn:hover {
      color: #ff6b6b;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 15px 0;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    .item-info {
      flex: 1;
    }
    .item-name {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .item-price {
      color: #ff6b6b;
      font-weight: bold;
    }
    .item-quantity {
      display: flex;
      align-items: center;
      margin: 0 15px;
    }
    .quantity-btn {
      width: 28px;
      height: 28px;
      background: #f0f0f0;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .quantity-btn:hover {
      background: #e0e0e0;
    }
    .quantity-value {
      margin: 0 10px;
      min-width: 25px;
      text-align: center;
      font-weight: bold;
    }
    .remove-btn {
      background: #ffebee;
      color: #ff6b6b;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .remove-btn:hover {
      background: #ffcdd2;
    }
    .checkout-section {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 2px dashed #eee;
    }
    .total-price {
      display: flex;
      justify-content: space-between;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .total-label {
      color: #555;
    }
    .total-value {
      color: #ff6b6b;
    }
    .checkout-btn {
      display: block;
      width: 100%;
      padding: 14px;
      background: linear-gradient(90deg, #4CAF50, #8BC34A);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      transition: all 0.3s;
      letter-spacing: 1px;
    }
    .checkout-btn:hover {
      background: linear-gradient(90deg, #45a049, #7cb342);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(76,175,80,0.4);
    }
    .empty-cart {
      text-align: center;
      padding: 30px;
      color: #888;
    }
    .empty-cart i {
      font-size: 50px;
      margin-bottom: 15px;
      color: #ffd6d6;
    }
    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #4CAF50;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 2000;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .header-note {
      text-align: center;
      margin: 10px 0 25px;
      color: #777;
      font-style: italic;
    }
    @media (max-width: 768px) {
      body {
        padding-right: 20px;
      }
      .cart {
        top: 15px;
        right: 15px;
        width: 50px;
        height: 50px;
      }
      .menu {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="cart" onclick="openCart()">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-count" id="cartCount">0</span>
  </div>

  <h1>❤️ 小汪私房菜点餐系统</h1>
  <div class="header-note">为心爱的TA点一份专属美食吧～</div>
  
  <div class="menu" id="menu">
    <!-- 菜品将通过JS动态加载 -->
  </div>

  <!-- 购物车弹窗 -->
  <div class="modal" id="cartModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeCart()">×</span>
      <h2><i class="fas fa-list"></i> 我的点餐清单</h2>
      <div id="cartItems"></div>
      <div class="checkout-section">
        <div class="total-price">
          <span class="total-label">总价：</span>
          <span class="total-value" id="totalPrice">¥0</span>
        </div>
        <button class="checkout-btn" onclick="checkout()">
          <i class="fas fa-paper-plane"></i> 提交订单
        </button>
      </div>
    </div>
  </div>

  <div class="notification" id="notification"></div>

  <script>
    // 分类后的菜品数据 - 使用本地图片路径
    const dishesByCategory = [
      {
        category: "家常小炒",
        icon: "fa-utensils",
        dishes: [
          { id: 1, name: "素三丝", price: 16, image: "images/susansi.jpg" },
          { id: 2, name: "手撕包菜", price: 18, image: "images/shousibaocai.jpg" },
          { id: 3, name: "酸辣土豆丝", price: 15, image: "images/suanlatudousi.jpg" },
          { id: 4, name: "干锅花菜", price: 22, image: "images/huacai.jpg" },
          { id: 5, name: "油淋茄子", price: 19, image: "images/youlinqiezi.jpg" },
          { id: 6, name: "西红柿炒鸡蛋", price: 18, image: "images/xihongshichajidan.jpg" },
          { id: 7, name: "干煸土豆丝", price: 22, image: "images/ganbiantudousi.jpg" },
          { id: 8, name: "干锅土豆片", price: 22, image: "images/ganguotudoupian.jpg" },
          { id: 9, name: "韭菜炒鸡蛋", price: 18, image: "images/jiucaichaojidan.jpg" },
          { id: 10, name: "清炒时蔬", price: 15, image: "images/qingchaoshishu.jpg" },
          { id: 11, name: "大碗双豆", price: 18, image: "images/dawanshuangdou.jpg" }
        ]
      },
      {
        category: "特色风味",
        icon: "fa-star",
        dishes: [
          { id: 12, name: "农家小炒肉", price: 28, image: "images/nongjiaxiaochaorou.jpg" },
          { id: 13, name: "水煮肉片", price: 35, image: "images/shuizhuroupian.jpg" },
          { id: 14, name: "小炒牛肉", price: 38, image: "images/xiaochaoniurou.jpg" },
          { id: 15, name: "辣子鸡", price: 30, image: "images/laziji.jpg" },
          { id: 16, name: "回锅肉", price: 28, image: "images/huiguorou.jpg" },
          { id: 17, name: "糖醋排骨", price: 45, image: "images/tangcupaigu.jpg" },
          { id: 18, name: "可乐鸡翅", price: 28, image: "images/kelejichi.jpg" },
          { id: 19, name: "尖椒鸡腿肉", price: 28, image: "images/jianjiaojiuirou.jpg" },
          { id: 20, name: "红烧鸡块", price: 28, image: "images/hongshaojikuai.jpg" },
          { id: 21, name: "烧牛腩", price: 58, image: "images/shaoniunan.jpg" },
          { id: 22, name: "黄焖鸡", price: 30, image: "images/huangmenji.jpg" },
          { id: 23, name: "豆角肉末", price: 25, image: "images/doujiaoroumo.jpg" },
          { id: 24, name: "肉沫茄子", price: 25, image: "images/roumoqiezi.jpg" },
          { id: 25, name: "家常豆腐", price: 22, image: "images/jiachangdoufu.jpg" },
          { id: 26, name: "油焖大虾", price: 68, image: "images/youmendaxia.jpg" },
          { id: 27, name: "豆角土豆炖排骨", price: 48, image: "images/doujiaotudoudunpaigu.jpg" },
          { id: 28, name: "溜肉段", price: 28, image: "images/liuroudun.jpg" },
          { id: 29, name: "菠萝咕噜肉", price: 28, image: "images/boluogulurou.jpg" },
          { id: 30, name: "地三鲜", price: 22, image: "images/disanxian.jpg" },
          { id: 31, name: "锅包肉", price: 28, image: "images/guobaorou.jpg" },
          { id: 32, name: "京酱肉丝", price: 35, image: "images/jingjiangrousi.jpg" }
        ]
      },
      {
        category: "凉菜",
        icon: "fa-snowflake",
        dishes: [
          { id: 33, name: "刀拍前女友", price: 12, image: "images/paihuanggua.jpg" },
          { id: 34, name: "凉拌毛豆", price: 18, image: "images/liangbanmaodou.jpg" },
          { id: 35, name: "凉拌皮蛋", price: 15, image: "images/liangbanpidan.jpg" }
        ]
      },
      {
        category: "鱼类",
        icon: "fa-fish",
        dishes: [
          { id: 36, name: "酸菜鱼", price: 48, image: "images/suancaiyu.jpg" },
          { id: 37, name: "红烧鱼", price: 35, image: "images/hongshaoyu.jpg" },
          { id: 38, name: "水煮鱼片", price: 38, image: "images/shuizhuyupian.jpg" },
          { id: 39, name: "剁椒鱼头", price: 48, image: "images/duojiaoyutou.jpg" },
          { id: 40, name: "清蒸鲈鱼", price: 38, image: "images/qingzhengluyu.jpg" },
          { id: 41, name: "干锅烤鱼", price: 56, image: "images/ganguokaoyu.jpg" }
        ]
      },
      {
        category: "汤",
        icon: "fa-mug-hot",
        dishes: [
          { id: 42, name: "西红柿鸡蛋汤", price: 15, image: "images/xihongshijidantang.jpg" },
          { id: 43, name: "蘑菇肉片汤", price: 22, image: "images/moguroupiantang.jpg" },
          { id: 44, name: "三鲜汤", price: 20, image: "images/sanxiantang.jpg" },
          { id: 45, name: "排骨萝卜汤", price: 45, image: "images/paiguluobotang.jpg" }
        ]
      }
    ];

    // 初始化菜单（按分类展示）
    function initMenu() {
      const menuEl = document.getElementById('menu');
      let menuHtml = '';
      
      // 循环每个分类
      dishesByCategory.forEach(category => {
        // 添加分类标题
        menuHtml += `<h2 class="category-title"><i class="fas ${category.icon}"></i>${category.category}</h2>`;
        // 添加该分类下的所有菜品
        menuHtml += category.dishes.map(dish => `
          <div class="dish-card">
            <div class="dish-img-container">
              <img src="${dish.image}" alt="${dish.name}" class="dish-img" onerror="this.src='https://via.placeholder.com/300x200?text=${dish.name}'">
            </div>
            <div class="dish-info">
              <div class="dish-name">${dish.name}</div>
              <div class="dish-price">¥${dish.price}</div>
              <button class="add-btn" onclick="addToCart(${dish.id})">
                <i class="fas fa-plus"></i> 加入菜单
              </button>
            </div>
          </div>
        `).join('');
      });
      
      menuEl.innerHTML = menuHtml;
    }

    // 购物车功能
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // 更新购物车数量显示
    function updateCartCount() {
      const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
      document.getElementById('cartCount').textContent = totalItems;
    }
    
    // 显示通知
    function showNotification(message, isSuccess = true) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.style.backgroundColor = isSuccess ? '#4CAF50' : '#ff4757';
      notification.style.opacity = 1;
      
      setTimeout(() => {
        notification.style.opacity = 0;
      }, 2000);
    }

    // 从所有菜品中找到对应ID的菜品（跨分类查找）
    function findDishById(id) {
      for (const category of dishesByCategory) {
        const dish = category.dishes.find(d => d.id === id);
        if (dish) return dish;
      }
      return null;
    }

    // 添加到购物车
    function addToCart(dishId) {
      const dish = findDishById(dishId);
      if (!dish) return;
      
      const existingItem = cart.find(item => item.id === dishId);
      
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({
          id: dish.id,
          name: dish.name,
          price: dish.price,
          quantity: 1
        });
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      showNotification(`已添加 ${dish.name} 到点菜单！`);
    }

    // 打开购物车
    function openCart() {
      const modal = document.getElementById('cartModal');
      const cartItemsEl = document.getElementById('cartItems');
      const totalPriceEl = document.getElementById('totalPrice');
      
      if (cart.length === 0) {
        cartItemsEl.innerHTML = `
          <div class="empty-cart">
            <i class="fas fa-shopping-basket"></i>
            <p>点菜单是空的哦～</p>
            <p>快去挑选喜欢的菜品吧！</p>
          </div>
        `;
      } else {
        let cartHtml = '';
        let totalPrice = 0;
        
        cart.forEach(item => {
          const itemTotal = item.price * item.quantity;
          totalPrice += itemTotal;
          
          cartHtml += `
            <div class="cart-item">
              <div class="item-info">
                <div class="item-name">${item.name}</div>
                <div class="item-price">¥${item.price} × ${item.quantity}</div>
              </div>
              <div class="item-quantity">
                <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                <span class="quantity-value">${item.quantity}</span>
                <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
              </div>
              <button class="remove-btn" onclick="removeFromCart(${item.id})">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
        });
        
        cartItemsEl.innerHTML = cartHtml;
        totalPriceEl.textContent = `¥${totalPrice}`;
      }
      
      modal.style.display = 'flex';
    }

    // 关闭购物车
    function closeCart() {
      document.getElementById('cartModal').style.display = 'none';
    }

    // 更新数量
    function updateQuantity(dishId, change) {
      const item = cart.find(item => item.id === dishId);
      
      if (item) {
        item.quantity += change;
        
        if (item.quantity <= 0) {
          cart = cart.filter(item => item.id !== dishId);
        }
        
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        openCart(); // 刷新购物车显示
      }
    }

    // 从购物车移除
    function removeFromCart(dishId) {
      cart = cart.filter(item => item.id !== dishId);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      openCart(); // 刷新购物车显示
      showNotification("已从购物车移除", false);
    }

    // 提交订单
    function checkout() {
      if (cart.length === 0) {
        showNotification("请先添加菜品！", false);
        return;
      }
      
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const orderDetails = cart.map(item => `${item.name} ×${item.quantity} (¥${item.price * item.quantity})`).join('\n');
      
      alert(`✅ 下单成功！\n\n${orderDetails}\n\n总计：¥${total}\n\n快告诉男朋友吧～`);
      cart = [];
      localStorage.removeItem('cart');
      updateCartCount();
      closeCart();
    }

    // 页面加载时初始化
    window.onload = function() {
      initMenu();
      updateCartCount();
    };
  </script>
</body>
</html>